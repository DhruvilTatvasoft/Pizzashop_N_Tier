@{
  Layout = "~/Views/Shared/_Sidebar&navbar.cshtml";
  ViewData["Title"] = "User Detail Page";
}

<link rel="stylesheet" href="~/css/showuser.css">


<div class="row p-0 h-100 d-flex">

  <div class="content pt-3 w-100">
    <div class="header d-flex align-items-center justify-content-center mb-4 d-flex">
      <h1>User</h1>
      <div class="search-add d-flex">

        <input type="search" class="form-control" id="search-record" onkeyup="loadPage(1)" aria-describedby="emailHelp"
          placeholder="Search">
        <form method="GET" asp-controller="Dashboard" asp-action="AddUser">
          <button type="submit" class="btn btn-primary" style="height:100%;">+ Add <span>user </span></button>
        </form>
      </div>
    </div>
    <div class="form-container shadow" id="t-container"></div>

    @* <div><h2>No record Found !! </h2></div> *@
  </div>
</div>
</div>

<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">

      <div class="modal-body d-flex flex-column align-items-center justify-content-center">
        <img src="~/images/icons8-alert-48.png" style="width:70px" class="mb-1" alt="">
        <h5 class="mb-2">Are you sure you want to delete this user?</h5>
        <div>
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Yes</button>
          <button type="button" class="btn btn-outline-primary">No</button>
        </div>
      </div>

    </div>
  </div>
</div>
</div>
<script>
  $(document).ready(function () {
    loadPage();
  });
  function loadPage(pageIndex, pageSize) {
    $.ajax({
      url: '@Url.Action("getUsers", "Dashboard")',
      type: "GET",
      data: { currentPage: pageIndex, maxRows: $("#dropdown").val(), search: $("#search-record").val(), maxRows: pageSize },
      cache: false,
      success: function (data) {
        $("#t-container").html(data);
        console.log(pageIndex);
      }
    });
  };
  function deleteuser(userid) {
    console.log("clicked");
    $.ajax({
      url: '@Url.Action("DeleteUser", "Dashboard")',
      type: 'GET',
      data: { Id: userid },
      success: function (response) {
        $("table").html(response)
      },
    });
  };


</script>
<script>
</script>